!function(a){function b(a){this.target=a}var c=a.beacon,d=function(c){return this!==a&&d.blend(this,d),new b(c)};d.toString=function(){return"baishuiz@gmail.com"};var e={base:f,avatarCore:b.prototype,self:f,init:function(){var b=Object.freeze;a.beacon=d,e.merge(d,f),b&&b(d),delete a.beacon.base},login:function(){a.beacon=d},logoff:function(){a.beacon=c}},f={base:e};a.beacon=f}(this),function(a){var b=a.base||{},c={merge:function(a){for(var b=arguments.length,c=0;b>c;c++){var d=arguments[c];for(var e in d)a[e]=d[e]}return a},blend:function(a,b,d){var e={cover:!0,mergePrototype:!1};d=d?c.merge(e,d):e,b=[].concat(b);for(var f=b.length,g=0;f>g;g++){var h=b[g];for(var i in h){var j=d.mergePrototype||h.hasOwnProperty(i),k=d.cover||!a[i];j&&k&&(a[i]=h[i])}}return a},isType:function(a,b){return"Null"===b&&null===a||"Undefined"===b&&void 0===a||"Number"===b&&isFinite(a)||Object.prototype.toString.call(a).slice(8,-1)===b},NS:function(a,b){for(var c=function(){return this}(),d=a.split("."),e=b||c||{},f=0,g=d.length;g>f;f++){var h=d[f];e[h]=e[h]||{},e=e[h]}return e},arrayIndexOf:function(a,b){return c.arrayIndexOf=Array.prototype.indexOf?function(a,b){return a=[].slice.call(a,0),a.indexOf(b)}:function(a,b){a=[].slice.call(a,0);for(var c=a.length;c>=0;c--)if(a[c]===b)return c;return c},c.arrayIndexOf(a,b)},each:function(a,b){if(a){a=[].concat(a);for(var c=a.length-1;c>=0;c--)b.call(a[c],c,a[c])}},getGUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=0|16*Math.random(),c="x"==a?b:8|3&b;return c.toString(16)}).toUpperCase()},"enum":function(){for(var a={},b=0;b<arguments.length;b++)a[arguments[b]]=arguments[b];return a}};c.blend(b,c)}(beacon),function(a){function b(){if(this instanceof b)return this;var a=[],d=[],e=[].slice.call(arguments,0),f=e.slice(0),g=function(){function b(){return f=e.slice(0)}var g=function(b,e){var f=c.arrayIndexOf(a,b);0>f&&(a.push(b),d.push(e))},h=function(b){var e=c.arrayIndexOf(a,b),f=d[e];return b?f:d.slice(0)};this.resetEventList=b,this.getEventList=function(){return e.slice(0)},this.registEvent=function(a){var d=c.arrayIndexOf,f=e.slice(0),h=function(c,e){var g=this,h=d(f,c.eventType);h>=0&&f.splice(h,1),0===f.length&&(a.call(g,e),f=b())};return g(a,h),h},this.removeEvent=function(a){var b=[].concat(h(a));return b}};return g.prototype=new b,new g}var c=a.base;c.combinationalEvent=b}(beacon),function(a){function b(a,b){var c=h.arrayIndexOf(a,b);return c}function c(a){var c=b(j,a);return 0>c&&(c=j.push(a)-1),c}function d(a,b,c){h.arrayIndexOf,(!i[a]||i[a].length<=0)&&(i[a]=[{name:b,fn:[]}]);for(var d=i[a],e=0;e<d.length;e++){if(d[e].name===b){d[e].fn.push(c);break}e===d.length-1&&i[a].push({name:b,fn:[]})}}function e(a,b,c){var e=b.registEvent(c),f=b.getEventList();h.each(f,function(b){d(a,f[b],e)})}function f(a,b,c){if(!i[a])return null;if(!b&&!c)return i[a]=[],!0;for(var d,e=i[a],f=0;f<e.length;f++)if(e[f].name===b){d=e[f].fn;break}if(c)for(var g=d.length;g>=0;g--)d[g]===c&&d.splice(g,1);else d.splice(0)}function g(a,b,c){var d=b.removeEvent(c);h.each(d,function(c){var e=d[c],g=b.getEventList();h.each(g,function(b){var c=g[b];f(a,c,e)})})}var h=a.base,i=[],j=[],k={hostProxy:{},attachEvent:function(a,b){var f=c(this),g=a instanceof h.combinationalEvent?e:d;g(f,a,b)},fireEvent:function(a,c){for(var d,e=this,f=b(j,e),g=i[f],k=0;k<g.length;k++)if(g[k].name===a){d=g[k].fn;break}h.each(d,function(b){var f={eventType:a};d[b].call(e,f,c)})},publicDispatchEvent:function(a,b){h.each(j,function(c){k.fireEvent.call(j[c],a,b)})},removeEvent:function(a,c){var d=this,e=b(j,d);a instanceof h.combinationalEvent?g(e,a,c):f(e,a,c)}},l=function(){var a=function(){};return a.prototype=k,h.blend(a,k),a}();h.Event=l}(beacon),function(a){var b=a.base,c={on:function(){var b=a.base,c=b.isType,d=b.Event.hostProxy,e=b.Event.publicDispatchEvent,f=b.Event.attachEvent,g=function(a,b){var g=[].slice.call(arguments,0);b&&c(b,"Function")?f.apply(d,g):e.apply(d,g)};return g}(a),off:function(){var b=a.base,c=b.Event.hostProxy,d=function(){var a=[].slice.call(arguments,0);b.Event.removeEvent.apply(c,a)};return d}(),blend:b.blend,NS:b.NS,arrayIndexOf:b.ArrayIndexOf,isType:b.isType,Enum:b.Enum,loginGlobal:b.login,logoffGlobal:b.logoff,createEvent:function(){var a,c=[].slice.call(arguments,0);return a=arguments.length>1?b.combinationalEvent.apply(this,c):{desc:c[0]}}},d={on:function(b,c){var d=[].slice.call(arguments,0),e=this.target,f=a.base,g=f.Event.fireEvent,h=f.Event.attachEvent;c&&f.isType(c,"Function")?f.each(e,function(a,b){h.apply(b,d)}):f.each(e,function(a,b){g.apply(b,d)})},off:function(a,c,d){var e=this.target,f=b.Event.removeEvent;b.each(e,function(b,e){f.call(e,a,c,d)})}};b.blend(b.avatarCore,d),b.blend(a,c),b.init()}(beacon);